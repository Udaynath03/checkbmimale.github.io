/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2018. MIT licensed.
 */
!function(e,t,i,o){"use strict";e(function(){function t(t){console.log("WHITE GAUGE");var i=e(".gauge");t>39.9&&(t=39.9);var o;t<18.5?(e(".results").hide(),e(".results_underweight").show(),o=t/18.5*40):t<25?(e(".results").hide(),e(".results_healthyweight_1").show(),o=(t-18.5)/6.5*45+45):t<30?(e(".results").hide(),e(".results_overweight_1").show(),o=(t-25)/5*45+90):(e(".results").hide(),e(".results_obese").show(),o=(t-30)/10*45+140),i.find(".needle").css({transform:"rotate("+o+"deg)"}),s(g.bmi)}function o(t){console.log("ASIAN GAUGE");var i=e(".gauge");t>39.9&&(t=39.9);var o;t<18.5?(e(".results").hide(),e(".results_underweight").show(),o=t/18.5*40):t<23?(e(".results").hide(),e(".results_healthyweight_2").show(),o=(t-18.5)/6.5*45+45):t<27.5?(e(".results").hide(),e(".results_overweight_2").show(),console.log("OVERWEIGHT ASIAN"),o=(t-25)/5*45+110):(e(".results").hide(),e(".results_obese").show(),console.log("OBESE ASIAN"),o=(t-30)/10*45+150,o>180&&(o=180)),i.find(".needle").css({transform:"rotate("+o+"deg)"}),h(g.bmi)}function s(t){console.log("results"),e(".results").show(),t<18.5?(e(".result_block").hide(),e(".underweight_result").show(),console.log("underweight")):18.5<t&&t<25?(e(".result_block").hide(),e(".healthyweight_result").show(),console.log("healthy weight")):25<t&&t<30?(e(".result_block").hide(),e(".overweight_result").show(),console.log("overweight")):(e(".result_block").hide(),e(".obeseweight_result").show(),console.log("obese"))}function h(t){console.log("asian_results"),e(".results").show(),t<18.5?(e(".result_block").hide(),e(".underweight_result").show(),console.log("underweight")):18.5<t&&t<23?(e(".result_block").hide(),e(".healthyweight_2_result").show(),console.log("healthy 2 weight")):23<t&&t<27.4?(e(".result_block").hide(),e(".overweight_2_result").show(),console.log("overweight 2")):(e(".result_block").hide(),e(".obeseweight_result").show(),console.log("obese"))}const g={ethnicity:"",gender:"",height:"",weight:"",bmi:"",weight_unit:"kg",height_unit:"cm"};console.log(g),e(".header_copy_title").click(function(){e(".header_copy_body_mobile").toggle(),e(this).find(".red_down_arrow").toggleClass("rotate")}),e(".disclaimer_copy_title").click(function(){e(".disclaimer_copy_body_mobile").toggle(),e(this).find(".red_down_arrow").toggleClass("rotate"),e("html, body").animate({scrollTop:e(".disclaimer_copy_title").offset().top+360},1e3)}),e(".circle_female").click(function(){g.gender="female",e(".height_image").css("background-image",'url("assets/img/height_female.svg")'),e(".circle_female").css("background-image",'url("assets/img/female_selected.svg")'),e(".circle_male").css("background-image",'url("assets/img/male.svg")'),console.log(g)}),e(".circle_male").click(function(){g.gender="male",e(".height_image").css("background-image",'url("assets/img/height_male.svg")'),e(".circle_male").css("background-image",'url("assets/img/male_selected.svg")'),e(".circle_female").css("background-image",'url("assets/img/female.svg")'),console.log(g)}),e(".btn_metric_weight").click(function(){e(".btn_metric_weight").css("background-color","rgb(237,31,84)"),e(".btn_imperial_weight").css("background-color","rgb(108, 113, 123)"),e(".metric_weight").show(),e(".imperial_weight").hide(),g.bmi="",g.height="",g.weight="",g.weight_unit="kg",console.warn("W METRIC"),console.log(g),e(".imperial_weight_input").val("")}),e(".btn_imperial_weight").click(function(){e(".btn_metric_weight").css("background-color","rgb(108, 113, 123)"),e(".btn_imperial_weight").css("background-color","rgb(237,31,84)"),e(".metric_weight").hide(),e(".imperial_weight").show(),g.bmi="",g.height="",g.weight="",g.weight_unit="st",console.log(g),e(".metric_weight_input").val("")}),e(".btn_metric_height").click(function(){e(".btn_metric_height").css("background-color","rgb(237,31,84)"),e(".btn_imperial_height").css("background-color","rgb(108, 113, 123)"),e(".metric_height").show(),e(".imperial_height").hide(),g.bmi="",g.height="",g.weight="",g.height_unit="cm",console.log(g),e(".imperial_height_input").val("")}),e(".btn_imperial_height").click(function(){e(".btn_metric_height").css("background-color","rgb(108, 113, 123)"),e(".btn_imperial_height").css("background-color","rgb(237,31,84)"),e(".metric_height").hide(),e(".imperial_height").show(),g.bmi="",g.height="",g.weight="",g.height_unit="ft",e(".metric_height_input").val(""),console.log(g)}),e(".ethnicity_item").click(function(){g.ethnicity=e(this).attr("data-ethnicity"),e(".ethnicity_item").css("background-color","white"),e(this).css("background-color","rgba(208, 208, 208, 0.3)"),e(".drop_down").hide(),e(".down_arrow").removeClass("rotate"),e(".btn_ethnicity").css("background-color","rgb(237,31,84)"),e(".ethnicity_chosen").text(this.innerHTML),1==g.ethnicity?e(".gauge_outer").css("backgroundImage",'url("assets/img/gauge.svg")'):e(".gauge_outer").css("backgroundImage",'url("assets/img/gauge_2.svg")'),console.log(g)}),e(".btn_ethnicity").click(function(t){t.stopPropagation(),e(".drop_down").toggle(),e(this).find(".down_arrow").toggleClass("rotate")}),e(i).click(function(){e(".drop_down").hide(),e(".down_arrow").removeClass("rotate")}),e(".btn_submit").click(function(){if("kg"==g.weight_unit&&(g.weight=e("[name=weight]").val()/1),"cm"==g.height_unit&&(g.height=e("[name=height]").val()/100),"st"==g.weight_unit){var i=e("[name=weight1]").val()/1,s=e("[name=weight2]").val()/1;console.log(i),console.log(s),g.weight=6.35029318*(i+s/14)}if("ft"==g.height_unit){var h=e("[name=height1]").val()/1,l=e("[name=height2]").val()/1;console.log(h),console.log(l),g.height=(h+l/12)/3.28}if(""!=g.gender&&""!=g.height&&""!=g.weight&&""!=g.ethnicity&&e.isNumeric(g.weight)&&e.isNumeric(g.height)?(e(".error").hide(),e(".app_results").show()):(e(".error").show(),e(".app_results").hide()),e(".needle").removeClass("starting_position"),e(".main_copy_results").css("display","none"),e("html, body").animate({scrollTop:e(".btn_submit").offset().top-60},1e3),console.log(g),g.bmi=g.weight/(g.height*g.height),1==g.ethnicity){if("kg"==g.weight_unit)var r=18.5*(g.height*g.height),c=25*(g.height*g.height);else if("st"==g.weight_unit)var r=18.5*(g.height*g.height)/6.35,c=25*(g.height*g.height)/6.35}else if(2==g.ethnicity)if("kg"==g.weight_unit)var r=18.5*(g.height*g.height),c=22.9*(g.height*g.height);else if("st"==g.weight_unit)var r=18.5*(g.height*g.height)/6.35,c=22.9*(g.height*g.height)/6.35;""==g.weight||""==g.height?e(".results").hide():(e(".bmi_results").html(g.bmi.toFixed(1)),e(".main_copy_results").show(),e(".suggested_weight").text("Your suggested weight range: "+r.toFixed(1)+"-"+c.toFixed(1)+" "+g.weight_unit)),1==g.ethnicity?t(g.bmi.toFixed(1)):2==g.ethnicity&&o(g.bmi.toFixed(1))})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiZ2F1Z2UiLCJibWkiLCJjb25zb2xlIiwibG9nIiwiZGVncmVlcyIsImhpZGUiLCJzaG93IiwiZmluZCIsImNzcyIsInRyYW5zZm9ybSIsInJlc3VsdHMiLCJwZXJzb24iLCJhc2lhbkdhdWdlIiwiYXNpYW5SZXN1bHRzIiwiZXRobmljaXR5IiwiZ2VuZGVyIiwiaGVpZ2h0Iiwid2VpZ2h0Iiwid2VpZ2h0X3VuaXQiLCJoZWlnaHRfdW5pdCIsImNsaWNrIiwidG9nZ2xlIiwidGhpcyIsInRvZ2dsZUNsYXNzIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsIndhcm4iLCJ2YWwiLCJhdHRyIiwicmVtb3ZlQ2xhc3MiLCJ0ZXh0IiwiaW5uZXJIVE1MIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJzdCIsImxiIiwiZnQiLCJpbmNoIiwiaXNOdW1lcmljIiwibG93ZXJMaW1pdCIsInVwcGVyTGltaXQiLCJodG1sIiwidG9GaXhlZCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBLFlBRUFILEdBQUEsV0F5V0EsUUFBQUksR0FBQUMsR0FFQUMsUUFBQUMsSUFBQSxjQUVBLElBQUFILEdBQUFKLEVBQUEsU0FFQUssR0FBQSxPQUNBQSxFQUFBLEtBR0EsSUFBQUcsRUFJQUgsR0FBQSxNQUVBTCxFQUFBLFlBQUFTLE9BQ0FULEVBQUEsd0JBQUFVLE9BRUFGLEVBQUFILEVBQUEsS0FBQSxJQUVBQSxFQUFBLElBRUFMLEVBQUEsWUFBQVMsT0FFQVQsRUFBQSw0QkFBQVUsT0FFQUYsR0FBQUgsRUFBQSxNQUFBLElBQUEsR0FBQSxJQUVBQSxFQUFBLElBR0FMLEVBQUEsWUFBQVMsT0FHQVQsRUFBQSx5QkFBQVUsT0FHQUYsR0FBQUgsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUtB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QixFQUFBSyxPQUFBTCxFQUFBSyxRQUNBMEIsRUFBQSxNQUFBL0IsRUFBQUssT0FBQUwsRUFBQUssWUFFQSxJQUFBLE1BQUFMLEVBQUFPLFlBRUEsR0FBQXVCLEdBQUEsTUFBQTlCLEVBQUFLLE9BQUFMLEVBQUFLLFFBQUEsS0FDQTBCLEVBQUEsTUFBQS9CLEVBQUFLLE9BQUFMLEVBQUFLLFFBQUEsSUFPQSxLQUFBTCxFQUFBTSxRQUFBLElBQUFOLEVBQUFLLE9BRUFwQixFQUFBLFlBQUFTLFFBSUFULEVBQUEsZ0JBQUErQyxLQUFBaEMsRUFBQVYsSUFBQTJDLFFBQUEsSUFDQWhELEVBQUEsc0JBQUFVLE9BQ0FWLEVBQUEscUJBQUFvQyxLQUFBLGdDQUFBUyxFQUFBRyxRQUFBLEdBQUEsSUFBQUYsRUFBQUUsUUFBQSxHQUFBLElBQUFqQyxFQUFBTyxjQU1BLEdBQUFQLEVBQUFHLFVBRUFkLEVBQUFXLEVBQUFWLElBQUEyQyxRQUFBLElBRUEsR0FBQWpDLEVBQUFHLFdBRUFGLEVBQUFELEVBQUFWLElBQUEyQyxRQUFBLFNBMExBQyxPQUFBaEQsT0FBQUMiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGNvbnN0IHBlcnNvbiA9IHtcblxuICAgICAgICAgICAgZXRobmljaXR5OiAnJyxcbiAgICAgICAgICAgIGdlbmRlcjogJycsXG4gICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgd2VpZ2h0OiAnJyxcbiAgICAgICAgICAgIGJtaTogJycsXG4gICAgICAgICAgICB3ZWlnaHRfdW5pdDogJ2tnJyxcbiAgICAgICAgICAgIGhlaWdodF91bml0OiAnY20nXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKHBlcnNvbik7XG5cbiAgICAgICAgLy8gaGVhZGluZyBjb3B5IGhpZGRlbiB3aGVuIG1vYmlsZSBcblxuICAgICAgICAkKCcuaGVhZGVyX2NvcHlfdGl0bGUnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5oZWFkZXJfY29weV9ib2R5X21vYmlsZScpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiLnJlZF9kb3duX2Fycm93XCIpLnRvZ2dsZUNsYXNzKCdyb3RhdGUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZGlzY2xhaW1lciBjb3B5IGhpZGRlbiB3aGVuIG1vYmlsZSBcbiAgICAgICAgJCgnLmRpc2NsYWltZXJfY29weV90aXRsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmRpc2NsYWltZXJfY29weV9ib2R5X21vYmlsZScpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiLnJlZF9kb3duX2Fycm93XCIpLnRvZ2dsZUNsYXNzKCdyb3RhdGUnKTtcblxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogKCQoXCIuZGlzY2xhaW1lcl9jb3B5X3RpdGxlXCIpLm9mZnNldCgpLnRvcCArIDM2MClcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIGdlbmRlciBzZWxlY3Rpb24gXG5cbiAgICAgICAgJCgnLmNpcmNsZV9mZW1hbGUnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHBlcnNvbi5nZW5kZXIgPSAnZmVtYWxlJztcblxuICAgICAgICAgICAgJCgnLmhlaWdodF9pbWFnZScpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgJ3VybChcImFzc2V0cy9pbWcvaGVpZ2h0X2ZlbWFsZS5zdmdcIiknKTtcbiAgICAgICAgICAgICQoXCIuY2lyY2xlX2ZlbWFsZVwiKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsICd1cmwoXCJhc3NldHMvaW1nL2ZlbWFsZV9zZWxlY3RlZC5zdmdcIiknKTtcbiAgICAgICAgICAgICQoXCIuY2lyY2xlX21hbGVcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCAndXJsKFwiYXNzZXRzL2ltZy9tYWxlLnN2Z1wiKScpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwZXJzb24pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5jaXJjbGVfbWFsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBwZXJzb24uZ2VuZGVyID0gJ21hbGUnO1xuXG4gICAgICAgICAgICAkKCcuaGVpZ2h0X2ltYWdlJykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCAndXJsKFwiYXNzZXRzL2ltZy9oZWlnaHRfbWFsZS5zdmdcIiknKTtcbiAgICAgICAgICAgICQoXCIuY2lyY2xlX21hbGVcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCAndXJsKFwiYXNzZXRzL2ltZy9tYWxlX3NlbGVjdGVkLnN2Z1wiKScpO1xuICAgICAgICAgICAgJChcIi5jaXJjbGVfZmVtYWxlXCIpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgJ3VybChcImFzc2V0cy9pbWcvZmVtYWxlLnN2Z1wiKScpO1xuXG5cblxuICAgICAgICAgICAgY29uc29sZS5sb2cocGVyc29uKTtcblxuICAgICAgICB9KTtcblxuXG5cblxuICAgICAgICAvLyBtZXRyaWMgYnV0dG9uIFxuXG4gICAgICAgIC8vICQoJy5idG5fbWV0cmljJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gICAkKCcuYnRuX21ldHJpYycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIFwicmdiKDIzNywzMSw4NClcIik7XG4gICAgICAgIC8vICAgJCgnLmJ0bl9pbXBlcmlhbCcpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIFwicmdiKDEwOCwgMTEzLCAxMjMpXCIpO1xuICAgICAgICAvLyAgICQoJy5tZXRyaWMnKS5zaG93KCk7XG4gICAgICAgIC8vICAgJCgnLmltcGVyaWFsJykuaGlkZSgpO1xuICAgICAgICAvLyAgIHBlcnNvbi5tZWFzdXJlbWVudCA9IFwia2dcIjtcblxuICAgICAgICAvLyAgIHBlcnNvbi5ibWkgPSAnJztcbiAgICAgICAgLy8gICBwZXJzb24uaGVpZ2h0ID0gJyc7XG4gICAgICAgIC8vICAgcGVyc29uLndlaWdodCA9ICcnO1xuICAgICAgICAvLyAgICQoJy53ZWlnaHQnKS52YWwoJyAnKTtcbiAgICAgICAgLy8gICAkKCcuaGVpZ2h0JykudmFsKCcgJyk7XG5cbiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhwZXJzb24pO1xuXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIE1ldHJpYyB3ZWlnaHRcblxuICAgICAgICAkKCcuYnRuX21ldHJpY193ZWlnaHQnKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgJCgnLmJ0bl9tZXRyaWNfd2VpZ2h0JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgXCJyZ2IoMjM3LDMxLDg0KVwiKTtcbiAgICAgICAgICAgICQoJy5idG5faW1wZXJpYWxfd2VpZ2h0JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgXCJyZ2IoMTA4LCAxMTMsIDEyMylcIik7XG4gICAgICAgICAgICAkKCcubWV0cmljX3dlaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICQoJy5pbXBlcmlhbF93ZWlnaHQnKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIHBlcnNvbi5ibWkgPSAnJztcbiAgICAgICAgICAgIHBlcnNvbi5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHBlcnNvbi53ZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHBlcnNvbi53ZWlnaHRfdW5pdCA9IFwia2dcIjtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVyBNRVRSSUMnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBlcnNvbik7XG5cbiAgICAgICAgICAgICQoJy5pbXBlcmlhbF93ZWlnaHRfaW5wdXQnKS52YWwoJycpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vSW1wZXJpYWwgd2VpZ2h0IFxuXG4gICAgICAgICQoJy5idG5faW1wZXJpYWxfd2VpZ2h0JykuY2xpY2soZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICQoJy5idG5fbWV0cmljX3dlaWdodCcpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIFwicmdiKDEwOCwgMTEzLCAxMjMpXCIpO1xuICAgICAgICAgICAgJCgnLmJ0bl9pbXBlcmlhbF93ZWlnaHQnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBcInJnYigyMzcsMzEsODQpXCIpO1xuICAgICAgICAgICAgJCgnLm1ldHJpY193ZWlnaHQnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcuaW1wZXJpYWxfd2VpZ2h0Jykuc2hvdygpO1xuXG5cbiAgICAgICAgICAgIHBlcnNvbi5ibWkgPSAnJztcbiAgICAgICAgICAgIHBlcnNvbi5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHBlcnNvbi53ZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHBlcnNvbi53ZWlnaHRfdW5pdCA9IFwic3RcIjtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocGVyc29uKTtcblxuICAgICAgICAgICAgJCgnLm1ldHJpY193ZWlnaHRfaW5wdXQnKS52YWwoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL01ldHJpYyBoZWlnaHRcblxuICAgICAgICAkKCcuYnRuX21ldHJpY19oZWlnaHQnKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgJCgnLmJ0bl9tZXRyaWNfaGVpZ2h0JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgXCJyZ2IoMjM3LDMxLDg0KVwiKTtcbiAgICAgICAgICAgICQoJy5idG5faW1wZXJpYWxfaGVpZ2h0JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgXCJyZ2IoMTA4LCAxMTMsIDEyMylcIik7XG4gICAgICAgICAgICAkKCcubWV0cmljX2hlaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICQoJy5pbXBlcmlhbF9oZWlnaHQnKS5oaWRlKCk7XG5cblxuICAgICAgICAgICAgcGVyc29uLmJtaSA9ICcnO1xuICAgICAgICAgICAgcGVyc29uLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgcGVyc29uLndlaWdodCA9ICcnO1xuICAgICAgICAgICAgcGVyc29uLmhlaWdodF91bml0ID0gXCJjbVwiO1xuXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBlcnNvbik7XG5cbiAgICAgICAgICAgICQoJy5pbXBlcmlhbF9oZWlnaHRfaW5wdXQnKS52YWwoJycpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vSW1wZXJpYWwgaGVpZ2h0XG5cbiAgICAgICAgJCgnLmJ0bl9pbXBlcmlhbF9oZWlnaHQnKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgJCgnLmJ0bl9tZXRyaWNfaGVpZ2h0JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgXCJyZ2IoMTA4LCAxMTMsIDEyMylcIik7XG4gICAgICAgICAgICAkKCcuYnRuX2ltcGVyaWFsX2hlaWdodCcpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIFwicmdiKDIzNywzMSw4NClcIik7XG4gICAgICAgICAgICAkKCcubWV0cmljX2hlaWdodCcpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5pbXBlcmlhbF9oZWlnaHQnKS5zaG93KCk7XG5cblxuICAgICAgICAgICAgcGVyc29uLmJtaSA9ICcnO1xuICAgICAgICAgICAgcGVyc29uLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgcGVyc29uLndlaWdodCA9ICcnO1xuICAgICAgICAgICAgcGVyc29uLmhlaWdodF91bml0ID0gXCJmdFwiO1xuXG4gICAgICAgICAgICAkKCcubWV0cmljX2hlaWdodF9pbnB1dCcpLnZhbCgnJyk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBlcnNvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIFJlc3RyaWN0IGlucHV0IGZpZWxkcyB0byBudW1iZXJzIG9ubHkgKi9cblxuICAgICAgICAvLyAkKCcubWV0cmljX2hlaWdodF9pbnB1dCcpLmtleXByZXNzKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAvLyAgICAgaWYgKGtleS5jaGFyQ29kZSA8IDQ4IHx8IGtleS5jaGFyQ29kZSA+IDU3KSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vICAgICBpZiAoa2V5LmNoYXJDb2RlID09IDgpIHJldHVybiB0cnVlO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyAkKCcubWV0cmljX3dlaWdodF9pbnB1dCcpLmtleXByZXNzKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAvLyAgICAgaWYgKGtleS5jaGFyQ29kZSA8IDQ4IHx8IGtleS5jaGFyQ29kZSA+IDU3KSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vICQoJy5pbXBlcmlhbF9oZWlnaHRfaW5wdXQnKS5rZXlwcmVzcyhmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgLy8gICAgIGlmIChrZXkuY2hhckNvZGUgPCA0OCB8fCBrZXkuY2hhckNvZGUgPiA1NykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyAkKCcuaW1wZXJpYWxfd2VpZ2h0X2lucHV0Jykua2V5cHJlc3MoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIC8vICAgICBpZiAoa2V5LmNoYXJDb2RlIDwgNDggfHwga2V5LmNoYXJDb2RlID4gNTcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gfSk7XG5cblxuXG4gICAgICAgIC8vIGV0aG5pY2l0eSBzZWxlY3Rpb25cblxuXG4gICAgICAgICQoJy5ldGhuaWNpdHlfaXRlbScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcGVyc29uLmV0aG5pY2l0eSA9ICQodGhpcykuYXR0cihcImRhdGEtZXRobmljaXR5XCIpO1xuICAgICAgICAgICAgJCgnLmV0aG5pY2l0eV9pdGVtJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ3doaXRlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2JhKDIwOCwgMjA4LCAyMDgsIDAuMyknKTtcbiAgICAgICAgICAgICQoJy5kcm9wX2Rvd24nKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiLmRvd25fYXJyb3dcIikucmVtb3ZlQ2xhc3MoJ3JvdGF0ZScpO1xuICAgICAgICAgICAgJCgnLmJ0bl9ldGhuaWNpdHknKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAncmdiKDIzNywzMSw4NCknKTtcbiAgICAgICAgICAgICQoJy5ldGhuaWNpdHlfY2hvc2VuJykudGV4dCh0aGlzLmlubmVySFRNTCk7IC8vIGNoYW5nZXMgZXRobmljaXR5IGJ1dHRvbiB0byBzZWxlY3RlZCBldGhuaWNpdHkgXG5cbiAgICAgICAgICAgIGlmIChwZXJzb24uZXRobmljaXR5ID09IDEpIHtcbiAgICAgICAgICAgICAgICAkKCcuZ2F1Z2Vfb3V0ZXInKS5jc3MoJ2JhY2tncm91bmRJbWFnZScsICd1cmwoXCJhc3NldHMvaW1nL2dhdWdlLnN2Z1wiKScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuZ2F1Z2Vfb3V0ZXInKS5jc3MoJ2JhY2tncm91bmRJbWFnZScsICd1cmwoXCJhc3NldHMvaW1nL2dhdWdlXzIuc3ZnXCIpJyk7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwZXJzb24pO1xuICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gZXRobmljaXR5IGJ1dHRvbiBcblxuXG4gICAgICAgICQoJy5idG5fZXRobmljaXR5JykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgJCgnLmRyb3BfZG93bicpLnRvZ2dsZSgpO1xuXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCIuZG93bl9hcnJvd1wiKS50b2dnbGVDbGFzcygncm90YXRlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFsbG93cyBmb3IgZHJvcCBkb3duIHRvIGNsb3NlIGlmIHVzZXIgY2xpY2tzIGFueXdoZXJlIG9uIHRvb2wgXG5cbiAgICAgICAgJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuZHJvcF9kb3duJykuaGlkZSgpO1xuICAgICAgICAgICAgJChcIi5kb3duX2Fycm93XCIpLnJlbW92ZUNsYXNzKCdyb3RhdGUnKTtcbiAgICAgICAgfSk7XG5cblxuXG5cblxuXG5cbiAgICAgICAgJCgnLmJ0bl9zdWJtaXQnKS5jbGljayhmdW5jdGlvbigpIHtcblxuXG5cblxuXG4gICAgICAgICAgICBpZiAocGVyc29uLndlaWdodF91bml0ID09ICdrZycpIHtcblxuICAgICAgICAgICAgICAgIHBlcnNvbi53ZWlnaHQgPSAoJCgnW25hbWU9d2VpZ2h0XScpLnZhbCgpKSAvIDE7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBlcnNvbi5oZWlnaHRfdW5pdCA9PSAnY20nKSB7XG5cbiAgICAgICAgICAgICAgICBwZXJzb24uaGVpZ2h0ID0gKCQoJ1tuYW1lPWhlaWdodF0nKS52YWwoKSkgLyAxMDA7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBlcnNvbi53ZWlnaHRfdW5pdCA9PSBcInN0XCIpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzdCA9ICgkKCdbbmFtZT13ZWlnaHQxXScpLnZhbCgpKSAvIDE7XG4gICAgICAgICAgICAgICAgdmFyIGxiID0gKCQoJ1tuYW1lPXdlaWdodDJdJykudmFsKCkpIC8gMTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGIpO1xuXG4gICAgICAgICAgICAgICAgcGVyc29uLndlaWdodCA9ICgoc3QgKyAobGIgLyAxNCkpICogNi4zNTAyOTMxOCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwZXJzb24uaGVpZ2h0X3VuaXQgPT0gXCJmdFwiKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZnQgPSAoJCgnW25hbWU9aGVpZ2h0MV0nKS52YWwoKSkgLyAxO1xuICAgICAgICAgICAgICAgIHZhciBpbmNoID0gKCQoJ1tuYW1lPWhlaWdodDJdJykudmFsKCkpIC8gMTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW5jaCk7XG5cbiAgICAgICAgICAgICAgICBwZXJzb24uaGVpZ2h0ID0gKGZ0ICsgKGluY2ggLyAxMikpIC8gMy4yODtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGVyc29uLmdlbmRlciA9PSAnJyB8fCBwZXJzb24uaGVpZ2h0ID09ICcnIHx8IHBlcnNvbi53ZWlnaHQgPT0gJycgfHwgcGVyc29uLmV0aG5pY2l0eSA9PSAnJyB8fCAhJC5pc051bWVyaWMocGVyc29uLndlaWdodCkgfHwgISQuaXNOdW1lcmljKHBlcnNvbi5oZWlnaHQpKSB7XG5cbiAgICAgICAgICAgICAgICAkKCcuZXJyb3InKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnLmFwcF9yZXN1bHRzJykuaGlkZSgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgJCgnLmVycm9yJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5hcHBfcmVzdWx0cycpLnNob3coKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAkKCcubmVlZGxlJykucmVtb3ZlQ2xhc3MoJ3N0YXJ0aW5nX3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICAkKCcubWFpbl9jb3B5X3Jlc3VsdHMnKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblxuXG4gICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAoJChcIi5idG5fc3VibWl0XCIpLm9mZnNldCgpLnRvcCAtIDYwKVxuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgIC8vIHNldHRpbmcgcGVyc29uIGhlaWdodCBhbmQgd2VpZ2h0ICBcblxuXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBlcnNvbik7XG5cbiAgICAgICAgICAgIC8vc2V0dGluZyBibWkgXG5cbiAgICAgICAgICAgIHBlcnNvbi5ibWkgPSBwZXJzb24ud2VpZ2h0IC8gKHBlcnNvbi5oZWlnaHQgKiBwZXJzb24uaGVpZ2h0KTtcblxuICAgICAgICAgICAgLy8gbG93ZXIgYW5kIHVwcGVyIGxpbWl0cyBvZiBoZWFsdGh5IHdlaWdodCAtIHRoaXMgaXMgaGVpZ2h0IGRlcGVuZGFudCBhbmQgc2hvd24gYXMgYSBzdWdnZXN0aW9uIHRvIHVzZXIgXG5cbiAgICAgICAgICAgIGlmIChwZXJzb24uZXRobmljaXR5ID09IDEpIHtcblxuICAgICAgICAgICAgICAgIGlmIChwZXJzb24ud2VpZ2h0X3VuaXQgPT0gXCJrZ1wiKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvd2VyTGltaXQgPSAxOC41ICogKHBlcnNvbi5oZWlnaHQgKiBwZXJzb24uaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAyNSAqIChwZXJzb24uaGVpZ2h0ICogcGVyc29uLmhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcnNvbi53ZWlnaHRfdW5pdCA9PSBcInN0XCIpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbG93ZXJMaW1pdCA9ICgxOC41ICogKHBlcnNvbi5oZWlnaHQgKiBwZXJzb24uaGVpZ2h0KSkgLyA2LjM1LFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9ICgyNSAqIChwZXJzb24uaGVpZ2h0ICogcGVyc29uLmhlaWdodCkpIC8gNi4zNTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyc29uLmV0aG5pY2l0eSA9PSAyKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocGVyc29uLndlaWdodF91bml0ID09IFwia2dcIikge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb3dlckxpbWl0ID0gMTguNSAqIChwZXJzb24uaGVpZ2h0ICogcGVyc29uLmhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMjIuOSAqIChwZXJzb24uaGVpZ2h0ICogcGVyc29uLmhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcnNvbi53ZWlnaHRfdW5pdCA9PSBcInN0XCIpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbG93ZXJMaW1pdCA9ICgxOC41ICogKHBlcnNvbi5oZWlnaHQgKiBwZXJzb24uaGVpZ2h0KSkgLyA2LjM1LFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9ICgyMi45ICogKHBlcnNvbi5oZWlnaHQgKiBwZXJzb24uaGVpZ2h0KSkgLyA2LjM1O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKHBlcnNvbi53ZWlnaHQgPT0gJycgfHwgcGVyc29uLmhlaWdodCA9PSAnJykge1xuXG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdHMnKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAkKCcuYm1pX3Jlc3VsdHMnKS5odG1sKHBlcnNvbi5ibWkudG9GaXhlZCgxKSk7XG4gICAgICAgICAgICAgICAgJCgnLm1haW5fY29weV9yZXN1bHRzJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5zdWdnZXN0ZWRfd2VpZ2h0JykudGV4dChcIllvdXIgc3VnZ2VzdGVkIHdlaWdodCByYW5nZTogXCIgKyAobG93ZXJMaW1pdC50b0ZpeGVkKDEpKSArIFwiLVwiICsgKHVwcGVyTGltaXQudG9GaXhlZCgxKSkgKyBcIiBcIiArIHBlcnNvbi53ZWlnaHRfdW5pdCk7IC8vICsgcGVyc29uLndlaWdodF91bml0XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9yZXN1bHRzKHBlcnNvbi5ibWkudG9GaXhlZCgxKSk7XG5cbiAgICAgICAgICAgIGlmIChwZXJzb24uZXRobmljaXR5ID09IDEpIHtcblxuICAgICAgICAgICAgICAgIGdhdWdlKHBlcnNvbi5ibWkudG9GaXhlZCgxKSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyc29uLmV0aG5pY2l0eSA9PSAyKSB7XG5cbiAgICAgICAgICAgICAgICBhc2lhbkdhdWdlKHBlcnNvbi5ibWkudG9GaXhlZCgxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gYm1pIGdhdWdlIC0gZGVwZW5kaW5nIG9uIHRoZSBibWkgdmFsdWUgd2lsbCBkZXBlbmQgb24gdGhlIGRlZ3JlZXMgdGhlIGRpYWwgdHVybnMuIFxuXG4gICAgICAgIGZ1bmN0aW9uIGdhdWdlKGJtaSkge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnV0hJVEUgR0FVR0UnKTtcblxuICAgICAgICAgICAgdmFyIGdhdWdlID0gJCgnLmdhdWdlJyk7XG5cbiAgICAgICAgICAgIGlmIChibWkgPiAzOS45KSB7XG4gICAgICAgICAgICAgICAgYm1pID0gMzkuOSAvLyBibWkgaXMgcmVzdHJpY3RlZCBhYm92ZSAzOS45IHNvIGRpYWwgZG9lc24ndCBjb250aW51ZSB0byB0dXJuIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGVncmVlcztcblxuICAgICAgICAgICAgLy8gZGVncmVlcyAtIGVhY2ggYmxvY2sgb24gdGhlIGRpYWwgaXMgb2YgYSBkaWZmZXJlbnQgcmFuZ2Ugc28gdGhlIGRlZ3JlZXMgaGF2ZSB0byBiZSBkZXRlcm1pbmVkIGRlcGVuZGFudCBvbiB3aGljaCBibG9jayB5b3UgYXJlIGluLiBcblxuICAgICAgICAgICAgaWYgKGJtaSA8IDE4LjUpIHtcbiAgICAgICAgICAgICAgICAvLyBnYXVnZS5hZGRDbGFzcygndW5kZXJ3ZWlnaHQnKTtcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0cycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0c191bmRlcndlaWdodCcpLnNob3coKTtcblxuICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAoKGJtaSAvIDE4LjUpICogNDApO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJtaSA8IDI1KSB7XG4gICAgICAgICAgICAgICAgLy8gZ2F1Z2UuYWRkQ2xhc3MoJ2hlYWx0aHknKTtcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0cycpLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzX2hlYWx0aHl3ZWlnaHRfMScpLnNob3coKTtcblxuICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAoKCgoYm1pIC0gMTguNSkgLyA2LjUpICogNDUpICsgNDUpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJtaSA8IDMwKSB7XG4gICAgICAgICAgICAgICAgLy8gZ2F1Z2UuYWRkQ2xhc3MoJ292ZXJ3ZWlnaHQnKTtcblxuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzJykuaGlkZSgpO1xuXG5cbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0c19vdmVyd2VpZ2h0XzEnKS5zaG93KCk7XG5cblxuICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAoKCgoYm1pIC0gMjUpIC8gNSkgKiA0NSkgKyA5MCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZ2F1Z2UuYWRkQ2xhc3MoJ29iZXNlJyk7XG5cbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0cycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0c19vYmVzZScpLnNob3coKTtcblxuICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAoKCgoYm1pIC0gMzApIC8gMTApICogNDUpICsgMTQwKTtcblxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdhdWdlLmZpbmQoJy5uZWVkbGUnKS5jc3Moe1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJ1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgcmVzdWx0cyhwZXJzb24uYm1pKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGFzaWFuR2F1Z2UoYm1pKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBU0lBTiBHQVVHRScpO1xuXG4gICAgICAgICAgICB2YXIgZ2F1Z2UgPSAkKCcuZ2F1Z2UnKTtcblxuICAgICAgICAgICAgaWYgKGJtaSA+IDM5LjkpIHtcbiAgICAgICAgICAgICAgICBibWkgPSAzOS45IC8vIGJtaSBpcyByZXN0cmljdGVkIGFib3ZlIDM5Ljkgc28gZGlhbCBkb2Vzbid0IGNvbnRpbnVlIHRvIHR1cm4gXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBkZWdyZWVzO1xuXG4gICAgICAgICAgICAvLyBkZWdyZWVzIC0gZWFjaCBibG9jayBvbiB0aGUgZGlhbCBpcyBvZiBhIGRpZmZlcmVudCByYW5nZSBzbyB0aGUgZGVncmVlcyBoYXZlIHRvIGJlIGRldGVybWluZWQgZGVwZW5kYW50IG9uIHdoaWNoIGJsb2NrIHlvdSBhcmUgaW4uIFxuXG4gICAgICAgICAgICBpZiAoYm1pIDwgMTguNSkge1xuICAgICAgICAgICAgICAgIC8vIGdhdWdlLmFkZENsYXNzKCd1bmRlcndlaWdodCcpO1xuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzX3VuZGVyd2VpZ2h0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAoKGJtaSAvIDE4LjUpICogNDApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChibWkgPCAyMykge1xuICAgICAgICAgICAgICAgIC8vIGdhdWdlLmFkZENsYXNzKCdoZWFsdGh5Jyk7XG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdHMnKS5oaWRlKCk7XG5cblxuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzX2hlYWx0aHl3ZWlnaHRfMicpLnNob3coKTtcblxuXG4gICAgICAgICAgICAgICAgZGVncmVlcyA9ICgoKChibWkgLSAxOC41KSAvIDYuNSkgKiA0NSkgKyA0NSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYm1pIDwgMjcuNSkge1xuICAgICAgICAgICAgICAgIC8vIGdhdWdlLmFkZENsYXNzKCdvdmVyd2VpZ2h0Jyk7XG5cbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0cycpLmhpZGUoKTtcblxuXG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdHNfb3ZlcndlaWdodF8yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPVkVSV0VJR0hUIEFTSUFOJyk7XG5cbiAgICAgICAgICAgICAgICBkZWdyZWVzID0gKCgoKGJtaSAtIDI1KSAvIDUpICogNDUpICsgMTEwKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBnYXVnZS5hZGRDbGFzcygnb2Jlc2UnKTtcblxuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRzX29iZXNlJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPQkVTRSBBU0lBTicpO1xuICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAoKCgoYm1pIC0gMzApIC8gMTApICogNDUpICsgMTUwKTtcblxuICAgICAgICAgICAgICAgIGlmIChkZWdyZWVzID4gMTgwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAxODA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnYXVnZS5maW5kKCcubmVlZGxlJykuY3NzKHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKSdcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGFzaWFuUmVzdWx0cyhwZXJzb24uYm1pKTtcblxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLy8gcmVzdWx0cyBzaG93biBkZXBlbmRhbnQgb24gcmlzayBhbmQgZXRobmljaXR5IFxuXG5cbiAgICAgICAgZnVuY3Rpb24gcmVzdWx0cyhibWkpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdHMnKTtcblxuICAgICAgICAgICAgJCgnLnJlc3VsdHMnKS5zaG93KCk7XG4gICAgICAgICAgICBpZiAoYm1pIDwgMTguNSkge1xuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRfYmxvY2snKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnVuZGVyd2VpZ2h0X3Jlc3VsdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVuZGVyd2VpZ2h0XCIpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgxOC41IDwgYm1pKSAmJiAoYm1pIDwgMjUpKSB7XG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdF9ibG9jaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhbHRoeXdlaWdodF9yZXN1bHQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJoZWFsdGh5IHdlaWdodFwiKVxuICAgICAgICAgICAgfSBlbHNlIGlmICgoMjUgPCBibWkpICYmIChibWkgPCAzMCkpIHtcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0X2Jsb2NrJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5vdmVyd2VpZ2h0X3Jlc3VsdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm92ZXJ3ZWlnaHRcIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdF9ibG9jaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcub2Jlc2V3ZWlnaHRfcmVzdWx0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib2Jlc2VcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFzaWFuUmVzdWx0cyhibWkpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FzaWFuX3Jlc3VsdHMnKTtcblxuICAgICAgICAgICAgJCgnLnJlc3VsdHMnKS5zaG93KCk7XG4gICAgICAgICAgICBpZiAoYm1pIDwgMTguNSkge1xuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRfYmxvY2snKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnVuZGVyd2VpZ2h0X3Jlc3VsdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVuZGVyd2VpZ2h0XCIpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgxOC41IDwgYm1pKSAmJiAoYm1pIDwgMjMpKSB7XG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdF9ibG9jaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhbHRoeXdlaWdodF8yX3Jlc3VsdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImhlYWx0aHkgMiB3ZWlnaHRcIilcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKDIzIDwgYm1pKSAmJiAoYm1pIDwgMjcuNCkpIHtcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0X2Jsb2NrJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5vdmVyd2VpZ2h0XzJfcmVzdWx0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3ZlcndlaWdodCAyXCIpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5yZXN1bHRfYmxvY2snKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLm9iZXNld2VpZ2h0X3Jlc3VsdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9iZXNlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG5cblxuICAgIH0pO1xuXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOyJdfQ==
